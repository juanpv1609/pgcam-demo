/*!
 * Start Bootstrap - SB Admin 2 v4.0.7 (https://startbootstrap.com/template-overviews/sb-admin-2)
 * Copyright 2013-2020 Start Bootstrap
 * Licensed under MIT (https://github.com/BlackrockDigital/startbootstrap-sb-admin-2/blob/master/LICENSE)
 */

function agregarModalU(){$("#exampleModalLabel").text("Agregar - Usuario"),$("#accionForm").html('<button class="btn btn-primary" type="submit"  onclick="InsertarUsuario();">Agregar</button>'),$("#formModal").modal({show:!0})}function editarModalU(e,o,a,r,t,i){$("#exampleModalLabel").text("Editar - Usuario"),$("#usuario_id").val(e),$("#nombres").val(o),$("#apellidos").val(a),$("#correo").val(r),$("#comboPerfil").val(i),$("#comboEstado").val(t),$("#accionForm").html('<button class="btn btn-primary" type="submit"  onclick="ActualizarUsuario();">Actualizar</button>'),$("#formModal").modal({show:!0})}function cambiarClaveU(e){$("#accionFormCambiaClave").show(),$("#formModal_password").modal({show:!0})}function activaPerfilForm(){1==$("#perfil_nombres").prop("disabled")&&$("#perfil_nombres").prop("disabled",!1).addClass("border border-warning"),1==$("#perfil_apellidos").prop("disabled")&&$("#perfil_apellidos").prop("disabled",!1).addClass("border border-warning"),1==$("#perfil_correo").prop("disabled")&&$("#perfil_correo").prop("disabled",!1).addClass("border border-warning"),$("#formGroupPassword").show(),$("#accionForm").html('<button class="btn btn-danger" type="button"  onclick="descativarPerfilForm();">Cancelar</button><button class="btn btn-primary" type="submit"  onclick="ActualizarInformacionUsuario();">Actualizar</button>')}function descativarPerfilForm(){0==$("#perfil_nombres").prop("disabled")&&$("#perfil_nombres").prop("disabled",!0).removeClass("border border-warning"),0==$("#perfil_apellidos").prop("disabled")&&$("#perfil_apellidos").prop("disabled",!0).removeClass("border border-warning"),0==$("#perfil_correo").prop("disabled")&&$("#perfil_correo").prop("disabled",!0).removeClass("border border-warning"),$("#formGroupPassword").hide(),$("#accionForm").html("")}function eliminarU(e){var o=$("#dir").val();Swal.fire({position:"top",title:"Está seguro?",text:"¡No podrás revertir esto!",icon:"warning",width:"22rem",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Sí, eliminar!",cancelButtonText:"Cancelar"}).then(a=>{a.value&&$.ajax({dataType:"html",type:"POST",url:o+"/usuarios/eliminar",data:"id="+e,beforeSend:function(e){},success:function(e){Swal.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,onOpen:e=>{e.addEventListener("mouseenter",Swal.stopTimer),e.addEventListener("mouseleave",Swal.resumeTimer)}}).fire({icon:"success",title:"Dato eliminado correctamente!"}),$("#data_Table").html(e),toDataTable("#dataTableUsuarios")},error:function(e,o,a){},complete:function(e,o){}})})}function InsertarUsuario(){var e=$("#nombres").val(),o=$("#apellidos").val(),a=$("#correo").val(),r=$("#comboPerfil").val(),t=$("#comboEstado").val(),i=$("#dir").val();$("#register").submit((function(n){n.preventDefault(),""==!e&&""==!o&&""==!a&&$.ajax({dataType:"html",type:"POST",url:i+"/usuarios/crear",data:"nombres="+e+"&apellidos="+o+"&correo="+a+"&perfil="+r+"&estado="+t,beforeSend:function(e){},success:function(e){Swal.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,onOpen:e=>{e.addEventListener("mouseenter",Swal.stopTimer),e.addEventListener("mouseleave",Swal.resumeTimer)}}).fire({icon:"success",title:"Dato creado correctamente!"}),$("#formModal").modal("hide"),$("#data_Table").html(e),toDataTable("#dataTableUsuarios")},error:function(e,o,a){$("#clave_igual").addClass("alert alert-danger").html(e+" "+o+" "+a).show(100).delay(2500).hide(100)},complete:function(e,o){}})}))}function ActualizarUsuario(){var e=$("#usuario_id").val(),o=$("#nombres").val(),a=$("#apellidos").val(),r=$("#correo").val(),t=$("#comboPerfil").val(),i=$("#comboEstado").val(),n=$("#dir").val();$("#register").submit((function(l){l.preventDefault(),""==!o&&""==!a&&""==!r&&$.ajax({dataType:"html",type:"POST",url:n+"/usuarios/editar",data:"id="+e+"&nombres="+o+"&apellidos="+a+"&correo="+r+"&perfil="+t+"&estado="+i,beforeSend:function(e){},success:function(e){Swal.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,onOpen:e=>{e.addEventListener("mouseenter",Swal.stopTimer),e.addEventListener("mouseleave",Swal.resumeTimer)}}).fire({icon:"success",title:"Dato actualizado correctamente!"}),$("#formModal").modal("hide"),$("#data_Table").html(e),toDataTable("#dataTableUsuarios")},error:function(e,o,a){},complete:function(e,o){}})}))}function ActualizarInformacionUsuario(){var e=$("#perfil_usuario_id").val(),o=$("#perfil_nombres").val(),a=$("#perfil_apellidos").val(),r=$("#perfil_correo").val(),t=$("#confirma_clave").val(),i=$("#dir").val();$("#perfil_register").submit((function(n){n.preventDefault(),""==!o&&""==!a&&""==!r&&""==!t&&$.ajax({dataType:"html",type:"POST",url:i+"/usuarios/editarperfil",data:"id="+e+"&nombres="+o+"&apellidos="+a+"&correo="+r+"&confirma_clave="+t,beforeSend:function(e){},success:function(e){Swal.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,onOpen:e=>{e.addEventListener("mouseenter",Swal.stopTimer),e.addEventListener("mouseleave",Swal.resumeTimer)}}).fire({icon:"success",title:"Dato actualizado correctamente!"}),window.location.href=i+"/usuarios/perfil"},error:function(e,o,a){},complete:function(e,o){}})}))}function ActualizaClaveUsuario(){var e=$("#nueva_clave").val(),o=$("#nueva_clave_2").val(),a=$("#dir").val();$("#register").submit((function(r){r.preventDefault(),""==!e&&""==!o&&(e==o?$.ajax({dataType:"html",type:"POST",url:a+"/usuarios/editarclave",data:"nueva_clave="+e,beforeSend:function(e){},success:function(e){Swal.fire({position:"top",title:"Está seguro?",text:"¡Seleccione 'Aceptar' para confirmar el cambio de contraseña!",icon:"question",width:"22rem",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Aceptar"}).then(e=>{e.value&&Swal.fire({position:"top",title:"Correcto!",text:"Su contraseña ah sido actualizada.\n Redirigiendo al login.",width:"22rem",icon:"success",confirmButtonText:"Aceptar"}).then(e=>{window.location.href=a+"/auth/logout"})})},error:function(e,o,a){Swal.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,onOpen:e=>{e.addEventListener("mouseenter",Swal.stopTimer),e.addEventListener("mouseleave",Swal.resumeTimer)}}).fire({icon:"error",title:"Ah ocurido un error!"})},complete:function(e,o){}}):$("#clave_igual").addClass("alert alert-danger").html("Deben coincidir las contraseñas").show(100).delay(2500).hide(100))}))}function toDataTable(e){$(e).DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.10.20/i18n/Spanish.json"}})}